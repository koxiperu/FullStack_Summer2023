<!DOCTYPE html>
<html>
<head>
    <title>AJAX POST Request Example</title>
</head>
<body>
    <h2>Song registration Form</h2>
    <form id="myForm" method="POST" action="client.php">
        <label for="name">Name: </label>
        <input type="text" id="name" name="name" required><br>
        <label for="genre">Genre:</label>
        <select name="genre" id="">
            <option value="pop">Pop</option>
            <option value="rock">Rock</option>
            <option value="jazz">Jazz</option>
            <option value="hip-hop">Hip-Hop</option>
        </select>
        <input type="submit" value="add song">
    </form>

    <div id="output"></div>

    <script>
        // Function to handle form submission and make the API POST request
        function submitForm(event) {        
            event.preventDefault(); // Prevent the default form submission behavior
            const form = event.target;  
            // Get the form element
            const formData = new FormData(form); // Create a new FormData object with form data
            //console.log(formData) to understand its content.
            // Replace 'YOUR_API_URL' with the actual API endpoint URL in our case its localhost:8000/path_to_file
            const apiUrl = 'localhost:8000/OOP5-/!exercises/songs/client.php';

            // Define the options for the fetch request (POST method with the form data in the body)
            const requestOptions = {
                method: 'POST', // Define the HTTP method
                body: formData, // Pass the form data as the request body
            };

            // Make the API request using the Fetch API
            fetch(apiUrl, requestOptions)
                .then(response => response.json())
                .then(data => {
                    // Process the API response data here
                    displayData(data);
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                });
            };
        // Function to display the API response data
        function displayData(data) {
            const outputDiv = document.getElementById('#output');
            let html = '';

            // Process the API response data and create the HTML content to display
            // Replace this with the relevant data from your API response
            html += '<h2>API Response Data:</h2>';
            html += '<p>Response received. Check your server logs to see the data.</p>';

            // Display the data in the outputDiv
            outputDiv.innerHTML = html;
        }

        // Add an event listener to the form's submit event
        const myForm = document.getElementById('#myForm');
        myForm.addEventListener('submit', submitForm); 
    </script>
</body>
</html>

