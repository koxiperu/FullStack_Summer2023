(()=>{var et=Date.now(),H=!("window"in globalThis)&&"serviceWorker"in globalThis,X="SW_VERSION_LOCAL",Y="bbf8600c",J="netlify-cnm",Oe="cnm-settings.json",tt=`/${J}/${Oe}`,xe="cnm-sw.js",W=`/${xe}`,v="/cnm-main-client.js",De="cnm.js",z=`/${J}/${De}`,Z="https://client-network-manager.netlify.app",nt=`${Z}${W}`,rt=`${Z}${v}`;var Q=1,G="__cnm-debug",k="__cnm-settings",C="ntl-cnm-",ot=1e3*60,st=1e3*10,it=1e3*60*60*4,He=["html","htm"],We=["js","mjs"],ve=["css"],Ge=["svg","jpg","jpeg","gif","png","webp","avif","bmp","ico"],ke=["tiff","tif","woff","woff2","ttf"],Ue=["aif","cda","mid","midi","mp3","mpa","wav","wma"],Fe=["avi","mp4","mov"],at=[...He,...We,...ve,...Ge,...ke,...Ue,...Fe,"txt","pdf"];var ee="disabled";var te="enabled",ne="enabled",re="disabled";var oe="cnm-sig-db-v1";var se="cnm-settings-v1";var ie="cnm-hits-v1";var ae="api",ce="config",le="lookahead";var Be=1e3*60,ct=1e3*60*60,lt=1e3*60*60;var p=!1,$e="localStorage"in globalThis&&globalThis.document!==void 0,Ke=$e?`MAIN-${Y}`:`SW-${X}`,ge=!1;function de(){if(!ge){ge=!0;try{JSON.parse(localStorage.getItem("cnm-debug")||"")===!0&&(p=!0)}catch{}}}function U(e){try{p!==!!e&&(p=!!e,p?localStorage.setItem("cnm-debug",JSON.stringify(p)):localStorage.removeItem("cnm-debug"))}catch{}}function fe(){return U(!p)}function F(){return location.href.includes(G)?!location.href.includes(`${G}=0`):null}function R(e,...t){p&&console[e](...t)}function P(e,t=90,n=80){let r=0;for(let s=0;s<e.length;s++)r=e.charCodeAt(s)+((r<<5)-r),r=r&r;return`hsl(${r%360}, ${t}%, ${n}%)`}var ue=e=>{let t=`%cCNM ${Ke} ::`;return e&&(t=`${t} ${e} ::`),{log:R.bind(null,"log",t,`background: ${e?P(e):"#bbb"}`),error:R.bind(null,"error",t,`background: ${e?P(e):"#bbb"}`),warn:R.bind(null,"warn",t,`background: ${e?P(e):"#bbb"}`),info:R.bind(null,"info",t,`background: ${e?P(e):"#bbb"}`),table:R.bind(null,"table",t,`background: ${e?P(e):"#bbb"}`)}},S={...ue(),namespace:e=>({...ue(e)})};function d(){let e=new URL(location.href),t=globalThis.netlify?.cnm?.settings;if(e.searchParams.has(k)){let n=JSON.parse(e.searchParams.get(k)||""),r={...t};return n?.clientCaching&&(r.clientCaching=n.clientCaching),n?.cachingOptions&&(r.cachingOptions=n.cachingOptions),r}return t}function T(){return d()?.clientCaching!==ee}var b={},N=S.namespace("MSG-HANDLER"),Se=!1,B;H&&self.addEventListener("message",he);function _e(e){N=S.namespace("MSG-HANDLER"),b=e.messageHandlers||{},B=e.signalsManager,e.messageListener&&!Se&&(Se=!0,e.messageListener.addEventListener("message",he))}function he(e){if(!e.data||!e.data.cnm)return;let{type:t,payload:n}=e.data,r=e.source;Object.keys(b).forEach(s=>{if(s===t||s.startsWith(`${t}_once_`)){let i=b[s];if(i)try{N.log(`start message handler for type "${t}"`);let c={type:t,payload:n,client:r};H&&B&&(c.serviceWorkerContext={signalsManager:B}),i(c),N.log(`end message handler for type "${t}"`)}catch(c){N.error(`message handler for type "${t}" threw an error`),N.error(c)}s.includes("_once_")&&delete b[s]}})}var qe=0;function Ee(e,t){b[`${e}_once_${qe}`]=t}function u(e,t={}){let n=navigator?.serviceWorker?.controller;n&&(T()||e==="SELF_DESTRUCT")&&n.postMessage({cnm:!0,type:e,payload:t})}var w=!0;try{globalThis.localStorage.getItem("access_check__")}catch{w=!1}var pe=e=>w?globalThis.localStorage.getItem(e):void 0,me=(e,t)=>w?globalThis.localStorage.setItem(e,t):void 0,Ce=e=>w?globalThis.localStorage.removeItem(e):void 0;function Te(e){return e.pathname.startsWith(W)||e.pathname.startsWith(v)||e.pathname.startsWith(z)}var L={},I=S.namespace("CACHE");function Ie(e){return e&&`${C}-${Q}-${e}`}async function Ve(e){I.log("start clearing caches",{signalKeys:e}),await Promise.allSettled(e.map(async t=>{let n="";typeof t=="object"?n=t.raw:typeof t=="string"&&(n=t),n&&(n=n.startsWith(C)?n:Ie(n),L[n]||(L[n]=await caches.open(n)),L[n]&&(caches.delete(n),delete L[n]))})),I.log("end clearing caches",{signalKeys:e})}async function je(e){I.log("start clearing all caches except these signals",{signalKeys:e});let t=await caches.keys(),n=e.map(({raw:s})=>Ie(s)),r=t.filter(s=>!n.includes(s)&&s.startsWith(C));r.length>0&&(I.log("keep cache keys",n),I.log("delete cache keys",r)),await Ve(r),I.log("end clearing all other caches")}async function Ae(){await je([])}function Re(){if(d().cachingOptions?.precachingLookahead===re)return;let e=[];document.querySelectorAll("img[loading=lazy]").forEach(t=>{"complete"in t&&!t.complete&&("currentSrc"in t&&t.currentSrc?e.push({url:t.currentSrc,destination:"image"}):"src"in t&&t.src?e.push({url:t.src,destination:"image"}):"href"in t&&t.href&&e.push({url:t.href,destination:"image"}))}),e.length>0&&y(e,le)}function y(e,t){u("PRECACHE_RESOURCES",{resources:e,src:t})}var Pe=({payload:e})=>{if(d().cachingOptions?.precachingLookahead===ne&&e&&typeof e.maxPrecache=="number"){let{maxPrecache:n}=e,r=0;document.querySelectorAll("img[loading=lazy]").forEach(s=>{"complete"in s&&!s.complete&&"loading"in s&&r<=n&&(s.loading="eager",r++)})}},Ne=()=>{let e=d().cachingOptions?.precachingConfiguredRoutes;Array.isArray(e)&&e.length>0&&y(e.map(t=>({url:t})),ce)};function m(e,t,n){let r=e.length;if(!r)return;if(n=Object.prototype.toString.call(n)=="[object Function]"?n:function(l){return l},t=+t,t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);let s=(r-1)*t,i=Math.floor(s),c=+n(e[i],i,e),f=+n(e[i+1],i+1,e);return c+(f-c)*(s-i)}var M=self.location.origin,Xe=self.location.hostname,Ye=Xe==="netlify.com"||M.endsWith(".netlify.com")||M.endsWith("--app.netlify.app")||M.endsWith("--docs.netlify.app")||M.endsWith("--www.netlify.app"),Je=S.namespace("rum-reporter");function O(){return Ye&&"DD_RUM"in window}function A(e,t){O()&&window.DD_RUM.addAction(e,t)}function x(e,t){O()&&window.DD_RUM.addRumGlobalContext(e,t)}var be={meta:{},stats:{},races:[]},h={...be};async function ze(e="unknown"){if(document.visibilityState==="hidden"||!O())return;let t=await Promise.race([window.netlify?.cnm?.getStats?.(),new Promise(a=>{setTimeout(()=>{a(null)},1e3)})]);if(!t||typeof t!="object"||!("stats"in t))return;let n=t,r=!!(n&&"meta"in n)&&typeof n.stats=="object",s=h?.meta?.version;n.meta.version&&s&&s!==n.meta.version&&(h={...be});let i=!!(h&&"meta"in h)&&typeof h.stats=="object",c=r&&i?Object.keys(n.stats).reduce((a,g)=>(isNaN(n.stats[g])||isNaN(h.stats[g])?a[g]=n.stats[g]:a[g]=n.stats[g]-h.stats[g],a),{}):n.stats,f={...n,stats:c,races:[]},l={};if("races"in n&&Array.isArray(n.races)){let a=n.races,g=h.races.length?a.slice(h.races.length):a;f.races=g}else f.races=[];if(f.races.length>0){l.count=f.races.length;let a=f.races.map(({delta:o})=>o).filter(o=>!isNaN(o)&&o!==1/0).sort((o,_)=>o-_);l.deltaAvg=a.reduce((o,_)=>o+_,0)/a.length,l.deltaP0=a[0],l.deltaP25=m(a,.25,o=>o),l.deltaP50=m(a,.5,o=>o),l.deltaP75=m(a,.75,o=>o),l.deltaP100=a[a.length-1];let g=f.races.map(({newPathResult:o,oldPathResult:_})=>{let j=(o-_)/_;return j?Math.round((j*100+Number.EPSILON)*100)/100:0}).filter(o=>!isNaN(o)&&o!==1/0).sort((o,_)=>o-_);l.changePercAvg=g.reduce((o,_)=>o+_,0)/g.length,l.changePercP0=g[0],l.changePercP25=m(g,.25,o=>o),l.changePercP50=m(g,.5,o=>o),l.changePercP75=m(g,.75,o=>o),l.changePercP100=g[g.length-1],l.slowerCount=a.filter(o=>o>0).length,l.fasterCount=l.count-l.slowerCount,O()&&f.races.forEach(o=>{!o.newPathResult||!o.oldPathResult||A("RACE_RESULT",{raceType:"cnm-fetch-race",raceCondition:e,totalInGroup:f.races.length,deltaChangePercentage:(o.newPathResult-o.oldPathResult)/o.oldPathResult*100,deltaChangeMultiple:o.oldPathResult/o.newPathResult,...o})})}if(r){let a={...f,raceResults:l,cnmStatsTrigger:e};delete a.races,Je.log("Stats from last view change",a),A("CNM_STATS",a)}h=n}var Ze=0,$;function we(){$&&clearTimeout($),$=setTimeout(()=>{ze(Ze++===0?"page_load":"route_change")},3e3)}function q(e){document.readyState==="complete"?e():window.addEventListener("load",e)}function K(){Le.forEach(e=>e())}var Le=[];q(function(){window.addEventListener("popstate",K);let e=window.history.pushState;window.history.pushState=function(...n){return K(),e.apply(window.history,n)};let t=window.history.replaceState;window.history.replaceState=function(...n){return K(),t.apply(window.history,n)}});function ye(e){Le.push(e),e()}var D=S.namespace("destroyer");async function V(){let e=d();if("serviceWorker"in navigator&&e?.cnmSWLocation){let t=await navigator.serviceWorker.getRegistrations(),n=new URL(e.cnmSWLocation,location.origin).href,r=t.find(({active:s})=>s&&s.scriptURL===n);if(r)D.log("start destroying sw and artifacts"),u("SELF_DESTRUCT"),setTimeout(()=>{r.unregister().then(s=>{D.log(`sw unregistered itself? ${s?"main thread unregistered":"sw self destroyed"}.`)})},100);else{let s=await caches.keys();s.length>0&&s.find(c=>c.startsWith(C))?await Promise.allSettled([Ae(),()=>{self.indexedDB.deleteDatabase(se),self.indexedDB.deleteDatabase(oe),self.indexedDB.deleteDatabase(ie)}]).then(c=>{D.log("end destroying sw and artifacts",{results:c})}):D.log("sw or artifacts do not exist, not running destroy fns")}}}de();var E=S.namespace("MAIN-CLIENT");async function Qe(){let e=d();if("serviceWorker"in navigator&&e?.cnmSWLocation){let t=await navigator.serviceWorker.getRegistrations(),n=!1,r=new URL("/",location.origin).href,s=new URL(e.cnmSWLocation,location.origin).href;t.forEach(({scope:i,active:c})=>{i===r&&c&&c.scriptURL!==s&&(n=!0)});try{if(n)return;await navigator.serviceWorker.register(e.cnmSWLocation,{updateViaCache:"none"}),Me(),_e({messageHandlers:{SW_ACTIVATION_PROCESS_COMPLETE:()=>Me(),GET_PRE_CNM_ASSET_REFS:()=>{q(()=>{let i=[];performance.getEntriesByType("resource").filter(({name:c})=>{c.startsWith(location.origin)&&!Te(new URL(c,location.origin))&&i.push(c)}),A("CNM_PRE_CNM_RESOURCES",{resourceCount:i.length}),i.length>0?(E.log("Hydrate pre-CNM resources",i),u("HYDRATE_RESOURCES_FROM_HTTP_CACHE",{resources:i})):E.log("no pre-CNM should be hydrated",i)})},HYDRATION_STATS:({payload:i})=>{i&&(E.log("hydrate resource stats",i),A("CNM_HYDRATION_STATS",i))},PRECACHE_STATS:({payload:i})=>{i&&(E.log("precaching stats",i),A("CNM_PRECACHE_STATS",i))},PRECACHE_LOOKAHEADS:Pe},messageListener:navigator.serviceWorker})}catch(i){E.error(`Registration failed with ${i}`)}}}function Me(){u("EXPLICIT_ACTIVATE");let e=F();e&&u("TOGGLE_DEBUG",{on:e}),u("UPDATE_CLIENT_SETTINGS",d()),Ne()}(async()=>{if(window.__cnmjsInvoked){E.error("client has been loaded multiple times. This script will stop");return}window.__cnmjsInvoked=!0;let e=F();e!==null&&await U(e);let t=d();if(!t){E.error("settings have not been provided by the snippet. This client will not run");return}window.netlify=window.netlify||{},window.netlify.cnm=window.netlify.cnm||{},window.netlify.cnm.refreshSignal=()=>u("EXPLICIT_SIGNAL_FETCH"),window.netlify.cnm.fetchUrlFromCache=r=>u("FETCH_FROM_CACHE",{url:r}),window.netlify.cnm.precacheResources=r=>y(r,ae),window.netlify.cnm.messageSW=u,window.netlify.cnm.getStats=()=>new Promise(r=>{Ee("NET_STATS",({payload:s})=>{r(s)}),u("GET_NET_STATS")}),window.netlify.cnm.toggleDebug=()=>{u("TOGGLE_DEBUG"),fe()},window.netlify.cnm.destroySW=()=>V();let n=!!pe("cnm_sw_enabled")&&T();T()?(E.log("SW is Enabled. Setting value: ",t.clientCaching),Qe(),n||me("cnm_sw_enabled","true")):(E.log("SW is disabled. Setting value: ",t.clientCaching),V(),Ce("cnm_sw_enabled")),ye(()=>{we(),Re()}),x("cnmSWEnabled",T()),x("cnmSWPreviouslyEnabled",n),x("cnmNavResourceAffinityEnabled",d().cachingOptions?.navResourceAffinity===te)})();})();
